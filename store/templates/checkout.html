{% extends "index.html" %}
{% load static %}

{% block current_page %}Checkout{% endblock current_page %}

{% block body %}
{% block navigation %}
{{ block.super }}
{% endblock navigation %}

<section class="hero-wrap hero-wrap-2" style="background-image: url({% static 'assets/images/bg_2.jpg' %});" data-stellar-background-ratio="0.5">
  <div class="overlay"></div>
  <div class="container">
    <div class="row no-gutters slider-text align-items-end justify-content-center">
      <div class="col-md-9 ftco-animate mb-5 text-center">
        <p class="breadcrumbs mb-0">
          <span class="mr-2"><a href="/">Home <i class="fa fa-chevron-right"></i></a></span> 
          <span>Checkout <i class="fa fa-chevron-right"></i></span>
        </p>
        <h2 class="mb-0 bread">Checkout</h2>
      </div>
    </div>
  </div>
</section>

<section class="ftco-section">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-xl-10 ftco-animate">

        <!-- BILLING FORM -->
        <form method="POST" action="{% url 'place_order' %}" class="billing-form">
          {% csrf_token %}
          <h3 class="mb-4 billing-heading">Billing Details</h3>

          <div class="row align-items-end">
            <div class="col-md-6">
              <div class="form-group">
                <label>First Name</label>
                <input name="first_name" type="text" class="form-control" required>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-group">
                <label>Last Name</label>
                <input name="last_name" type="text" class="form-control" required>
              </div>
            </div>

            <div class="w-100"></div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Phone</label>
                <input name="phone" type="text" class="form-control" required>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-group">
                <label>Email Address</label>
                <input name="email" type="email" class="form-control" required>
              </div>
            </div>

            <div class="w-100"></div>
            <div class="col-md-12">
              <div class="form-group">
                <label>Street Address</label>
                <input name="address" type="text" class="form-control" required>
              </div>
            </div>

            <div class="w-100"></div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Town / City</label>
                <input name="city" type="text" class="form-control" required>
              </div>
            </div>

            <div class="col-md-6">
              <div class="form-group">
                <label>Postcode / ZIP</label>
                <input name="zipcode" type="text" class="form-control" required>
              </div>
            </div>
          </div>

        <!-- END BILLING FORM -->

        <div class="row mt-5 pt-3 d-flex">

          <!-- CART TOTAL -->
          <div class="col-md-6 d-flex">
            <div class="cart-detail cart-total p-3 p-md-4">
              <h3 class="billing-heading mb-4">Cart Total</h3>

              {% for item in cart_items %}
              <p class="d-flex">
                <span>{{ item.whiskey.name }} x {{ item.quantity }}</span>
                <span>Ksh {{ item.total_price }}</span>
              </p>
              {% endfor %}

              <hr>

              <p class="d-flex">
                <span>Subtotal</span>
                <span>Ksh {{ subtotal }}</span>
              </p>
              <p class="d-flex">
                <span>Delivery</span>
                <span>Ksh 0.00</span>
              </p>
              <p class="d-flex">
                <span>Discount</span>
                <span>Ksh 0.00</span>
              </p>

              <hr>

              <p class="d-flex total-price">
                <span>Total</span>
                <span>Ksh {{ total_price }}</span>
              </p>
            </div>
          </div>

          <!-- PAYMENT -->
          <div class="col-md-6">
            <div class="cart-detail p-3 p-md-4">
              <h3 class="billing-heading mb-4">Payment Method</h3>

              <div class="form-group">
                <label><input type="radio" name="payment" value="mpesa" required> Mpesa</label>
              </div>

              <div class="form-group">
                <label><input type="radio" name="payment" value="paypal"> Paypal</label>
              </div>

              <div class="form-group">
                <label><input type="radio" name="payment" value="bank"> Bank Transfer</label>
              </div>

              <p>
                <button type="submit" class="btn btn-primary py-3 px-4">
                  Place Order
                </button>
              </p>

            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>

{% block footer %}
{{ block.super }}
{% endblock footer %}

{% endblock body %}
